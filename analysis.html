<!DOCTYPE html>
<html>
<head>
	<title>Task Analysis</title>
    <a href="{{ url_for('tasks') }}" class="btn btn-secondary">Back to Tasks</a>

	<!-- Add the Bootstrap CSS -->
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
</head>
<body>
	<div class="container">
		<h1>Task Analysis</h1>

		<!-- Analysis 1: List the title and latency of the tasks that were completed after their deadlines -->
		<h2>Tasks completed after deadline:</h2>
		{% if results1 %}
			<table class="table table-striped">
				<thead>
					<tr>
						<th>Title</th>
						<th>Latency (in seconds)</th>
					</tr>
				</thead>
				<tbody>
					{% for row in results1 %}
						<tr>
							<td>{{ row.title }}</td>
							<td>{{ row.latency }}</td>
						</tr>
					{% endfor %}
				</tbody>
			</table>
		{% else %}
			<p>No results found.</p>
		{% endif %}

		<!-- Analysis 2: Give the average task completion time of the user -->
		<h2>Average task completion time:</h2>
		{% if results2 %}
            <table class="table table-striped">
                <tbody>
                    <tr>
                        <td>{{ results2.average }} seconds</td>

                    </tr>
                </tbody>
            </table>
		{% else %}
			<p>No results found.</p>
		{% endif %}

		<!-- Analysis 3: List the number of the completed tasks per task type, in descending order -->
		<h2>Number of completed tasks per task type:</h2>
		{% if results3 %}
			<table class="table table-striped">
				<thead>
					<tr>
						<th>Task Type</th>
						<th>Number of Completed Tasks</th>
					</tr>
				</thead>
				<tbody>
					{% for row in results3 %}
						<tr>
							<td>{{ row.task_type }}</td>
							<td>{{ row.num_completed }}</td>
						</tr>
					{% endfor %}
				</tbody>
			</table>
		{% else %}
			<p>No results found.</p>
		{% endif %}

		<!-- Analysis 4: List the title and deadline of uncompleted tasks in increasing order of deadlines -->
		<h2>Uncompleted tasks:</h2>
		{% if results4 %}
			<table class="table table-striped">
				<thead>
					<tr>
						<th>Title</th>
						<th>Deadline</th>
					</tr>
				</thead>
				<tbody>
					{% for row in results4 %}
						<tr>
							<td>{{ row.title }}</td>
							<td>{{ row.deadline }}</td>
						</tr>
					{% endfor %}
				</tbody>
			</table>
		{% else %}
			<p>No results found.</p>
		{% endif %}

		<!-- Analysis 5: List the title and task completion time of the top 2 completed tasks that took the most time, in descending order -->
		<!-- Analysis 5: List the title and task completion time of the top 2 completed tasks that took the most time -->
        <h2>Top 2 completed tasks that took the most time:</h2>
        {% if results5 %}
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>Title</th>
                        <th>Completion Time (in seconds)</th>
                    </tr>
                </thead>
                <tbody>
                    {% for row in results5 %}
                        <tr>
                            <td>{{ row.title }}</td>
                            <td>{{ row.completion_time }}</td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        {% else %}
            <p>No results found.</p>
        {% endif %}
      </div>
    </div>
  </div>

</body>

</html>